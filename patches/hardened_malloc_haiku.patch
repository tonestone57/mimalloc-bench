diff --git a/h_malloc.c b/h_malloc.c
index 2d995ef..42dff4e 100644
--- a/h_malloc.c
+++ b/h_malloc.c
@@ -60,6 +60,10 @@

 #if N_ARENA > 1
+#ifdef __HAIKU__
+__attribute__((tls_model("global-dynamic")))
+#else
 __attribute__((tls_model("initial-exec")))
+#endif
 static _Thread_local unsigned thread_arena = N_ARENA;
 static atomic_uint thread_arena_counter = 0;
 #else
diff --git a/memory.c b/memory.c
index 2d995ef..42dff4e 100644
--- a/memory.c
+++ b/memory.c
@@ -4,6 +4,8 @@

 #ifdef LABEL_MEMORY
+#ifndef __HAIKU__
 #include <sys/prctl.h>
+#endif
 #endif

 #ifndef PR_SET_VMA
@@ -112,7 +112,7 @@
 }

 bool memory_set_name(UNUSED void *ptr, UNUSED size_t size, UNUSED const char *name) {
-#ifdef LABEL_MEMORY
+#if defined(LABEL_MEMORY) && !defined(__HAIKU__)
     return prctl(PR_SET_VMA, PR_SET_VMA_ANON_NAME, ptr, size, name);
 #else
     return false;
diff --git a/random.c b/random.c
index 8883531..abda53e 100644
--- a/random.c
+++ b/random.c
@@ -4,24 +4,32 @@
 #include "chacha.h"
 #include "random.h"
 #include "util.h"

+#ifdef __HAIKU__
+#include <stdlib.h>
+#else
 #include <sys/random.h>
+#endif

 static void get_random_seed(void *buf, size_t size) {
+#ifdef __HAIKU__
+    arc4random_buf(buf, size);
+#else
     while (size) {
         ssize_t r;

         do {
             r = getrandom(buf, size, 0);
         } while (r == -1 && errno == EINTR);

         if (r <= 0) {
             fatal_error("getrandom failed");
         }

         buf = (char *)buf + r;
         size -= r;
     }
+#endif
 }

 void random_state_init(struct random_state *state) {
