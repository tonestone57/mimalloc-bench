diff --git a/h_malloc.c b/h_malloc.c
index a8e2f8d..8b2e115 100644
--- a/h_malloc.c
+++ b/h_malloc.c
@@ -61,7 +61,11 @@ static const size_t canary_size = SLAB_CANARY ? sizeof(u64) : 0;
 #define CACHELINE_SIZE 64

 #if N_ARENA > 1
+#ifdef __HAIKU__
+__attribute__((tls_model("global-dynamic")))
+#else
 __attribute__((tls_model("initial-exec")))
+#endif
 static _Thread_local unsigned thread_arena = N_ARENA;
 static atomic_uint thread_arena_counter = 0;
 #else
diff --git a/memory.c b/memory.c
index 42dff4e..2d995ef 100644
--- a/memory.c
+++ b/memory.c
@@ -3,7 +3,9 @@
 #include <sys/mman.h>

 #ifdef LABEL_MEMORY
+#ifndef __HAIKU__
 #include <sys/prctl.h>
+#endif
 #endif

 #ifndef PR_SET_VMA
@@ -121,7 +123,7 @@ bool memory_purge(void *ptr, size_t size) {
 }

 bool memory_set_name(UNUSED void *ptr, UNUSED size_t size, UNUSED const char *name) {
-#ifdef LABEL_MEMORY
+#if defined(LABEL_MEMORY) && !defined(__HAIKU__)
     return prctl(PR_SET_VMA, PR_SET_VMA_ANON_NAME, ptr, size, name);
 #else
     return false;
diff --git a/random.c b/random.c
index 753278f..8883531 100644
--- a/random.c
+++ b/random.c
@@ -1,13 +1,22 @@
 #include <errno.h>
 #include <string.h>

+#ifdef __HAIKU__
+#include <stdlib.h>
+#endif
+
 #include "chacha.h"
 #include "random.h"
 #include "util.h"

+#ifndef __HAIKU__
 #include <sys/random.h>
+#endif

 static void get_random_seed(void *buf, size_t size) {
+#ifdef __HAIKU__
+    arc4random_buf(buf, size);
+#else
     while (size) {
         ssize_t r;

@@ -22,6 +31,7 @@ static void get_random_seed(void *buf, size_t size) {
         buf = (char *)buf + r;
         size -= r;
     }
+#endif
 }

 void random_state_init(struct random_state *state) {
