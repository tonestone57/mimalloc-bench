diff --git a/util.c b/util.c
index a8e51b3..13b631d 100644
--- a/util.c
+++ b/util.c
@@ -1,6 +1,9 @@
 #include <errno.h>
 #include <fcntl.h>
 #include <string.h>
+#ifdef __HAIKU__
+#include <stdlib.h>
+#endif
 #include <sys/mman.h>
 #include <sys/random.h>
 #include <sys/stat.h>
@@ -49,6 +52,9 @@ void get_random(void *buffer, size_t size) {
         }
     }

+#elif defined(__HAIKU__)
+    arc4random_buf(buffer, size);
+    return;
 #else
     while (true) {
         ssize_t ret = getrandom(buffer, size, 0);
diff --git a/util.h b/util.h
index 9235d97..b2a0c64 100644
--- a/util.h
+++ b/util.h
@@ -4,6 +4,9 @@
 #include <stdbool.h>
 #include <stddef.h>
 #include <sys/mman.h>
+#ifdef __HAIKU__
+#define MAP_FIXED_NOREPLACE 0
+#endif

 #include "h_malloc/config.h"
