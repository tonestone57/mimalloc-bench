--- a/build/ninja/generator.py
+++ b/build/ninja/generator.py
@@ -4,7 +4,7 @@

 import argparse
 import os
-import pipes
+import shlex
 import sys

 import platform
@@ -82,7 +82,7 @@
     env_keys = set(['CC', 'AR', 'LINK', 'CFLAGS', 'ARFLAGS', 'LINKFLAGS'])
     configure_env = dict((key, os.environ[key]) for key in os.environ if key in env_keys)
     if configure_env:
-      config_str = ' '.join([key + '=' + pipes.quote(configure_env[key]) for key in configure_env])
+      config_str = ' '.join([key + '=' + shlex.quote(configure_env[key]) for key in configure_env])
       self.writer.variable('configure_env', config_str + '$ ')

     if variables is None:
